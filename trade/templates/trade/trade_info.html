{% extends "mypage/layout.html" %}
{% load trade_tags %}

{% block mypage_content %}

<style>
    .table > tbody > tr > td {
         vertical-align: middle;
    }
    .thumbnail:hover {
        cursor:auto;
    }
</style>
<div class="container-fluid" style="padding:0px">
    <h2> 아래 해당하는 정보를 참고하시고 거래를 마쳐주세요. </h2>
    <div class="row thumbnail" style="padding: 10px; margin:5px;">
        <div class="col-sm-9" style="padding:0px;">
            <div class="col-xs-3">
                <div id="iteminfo" class="carousel slide" data-ride="carousel">
                    <!--페이지-->
                    <div class="carousel-inner">
                        {% for item_image in order.item.itemimage_set.all %}
                            {% if forloop.counter == 1 %}
                                <div class="item active">
                            {% else %}
                                <div class="item">
                            {% endif %}
                                    <a href="{% url "trade:item_detail" order.item.id %}">
                                        <img class="img-thumbnail img-responsive" style="width:auto;" src="{{ item_image.photo.url }}"/>
                                    </a>
                                </div>
                        {% endfor %}
                    </div>
                </div>
            </div>
            <div class="col-xs-9" style="padding:5px;">
                <div class="col-xs-12" style="padding:0px;">
                    <b class="col-xs-9" style="padding:0px;">{{ order.name }}</b><b class="col-xs-3 text-right pull-right" style="color:orange;padding:0px;">{{ order.amount_html }}</b>
                </div>
                <div class="col-xs-12" style="padding:0px;">
                    <br>{{ order.status_html }}
                    <small class="pull-right"><i class="far fa-clock"></i> {{ order.updated_at }}</small>
                <hr>
                </div>
            </div>
        </div>
        <div class="col-sm-3 text-center" style="padding:5px;">
            <div class="row" style="margin:5px"><a href="{% url "store:store_sell_list" order.item.user.storeprofile.pk %}">
                <button class="btn btn-default col-xs-12"><i class="fas fa-user"></i> {{ order.item.user.profile.nick_name }}</button></a>
            </div>
            {% if order.status == 'paid' or order.status == 'reserv' and order.is_active %}
            <div class="row" style="margin:5px">
                <a href="{% url "trade:order_confirm" order.id %}"><button class="btn btn-primary col-xs-12"><i class="fa fa-check-circle"></i> 구매 확정</button></a>
            </div>
            {% endif %}
            {% if order.status == 'success' %}
            <div class="row" style="margin:5px">
                <a href="{% url "store:store_grade_new" order.item.user.storeprofile.pk order.item.pk %}"><button class="btn btn-primary col-xs-12"><i class="fas fa-pencil-alt"></i> 리뷰쓰러가기</button></a>
            </div>
            {% endif %}
            {% if order.status == 'paid' or order.status == 'reserv' %}
            <div class="row" style="margin:5px">
                <a href="{% url "trade:order_cancle" order.id %}"<button class="btn btn-danger col-xs-12"><i class="fa fa-times"></i> 주문 취소</button></a>
            </div>
            {% endif %}
        </div>
    </div>
</div>
<hr>
<div class="thumbnail">
<form class="form-horizontal">
        <div class="form-group">
            <div class="form-group">
                <div class="col-sm-12 text-center">
                    <h2><i class="fas fa-shipping-fast" style="color:#368AFF"></i> 구매자 배송 정보</h2>
                </div>
            </div>
        </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">수령인</label>
              <div class=" col-sm-10">
                <input type="text" class="form-control col-sm-10" readonly required value="{{ order.username }}">
              </div>
          </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">이메일</label>
              <div class=" col-sm-10">
                <input type="text" class="form-control col-sm-10" readonly required value="{{ order.email }}">
              </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">연락처</label>
              <div class=" col-sm-10">
                <input type="text" class="form-control col-sm-10" readonly required value="{{ order.phone }}">
              </div>
            </div>
          <div class="form-group">
              <label class="col-sm-2 control-label">배송지</label>
              <div class=" col-sm-10">
                <input type="text" class="form-control col-sm-10" readonly required value="{{ order.post_code }}{{ order.address }}{{ order.detail_address }}">
              </div>
          </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">배송시 요청사항</label>
              <div class=" col-sm-10">
                <input type="text" class="form-control col-sm-10" readonly required value="{{ order.requirement }}">
              </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">결제 방법</label>
              <div class=" col-sm-10">
                <input type="text" class="form-control col-sm-10" readonly required value="{{ order.get_pay_choice_display }}">
              </div>
            </div>
</form>
</div>
<hr>
<div class="thumbnail">
<form class="form-horizontal">
        <div class="form-group">
            <div class="form-group">
                <div class="col-sm-12 text-center">
                    <h2><i class="fas fa-user"></i> 판매자 정보</h2>
                </div>
            </div>
        </div>
          <div class="form-group">
            <label class="col-sm-2 control-label">판매자</label>
              <div class=" col-sm-10">
                <input type="text" class="form-control col-sm-10" readonly required value="{{ order.item.user.profile.nick_name }}">
              </div>
          </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">이메일</label>
              <div class=" col-sm-10">
                <input type="text" class="form-control col-sm-10" readonly required value="{{ order.item.user.profile.email }}">
              </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">연락처</label>
              <div class=" col-sm-10">
                <input type="text" class="form-control col-sm-10" readonly required value="{{ order.item.user.profile.phone }}">
              </div>
            </div>
          <div class="form-group">
              <label class="col-sm-2 control-label">주소</label>
              <div class=" col-sm-10">
                <input type="text" class="form-control col-sm-10" readonly required value="{{ order.item.user.profile.post_code }}{{ order.item.user.profile.address }}{{ order.item.user.profile.detail_address }}">
              </div>
          </div>
            <div class="form-group">
                <label class="col-sm-2 control-label">계좌번호</label>
              <div class=" col-sm-10">
                <input type="text" class="form-control col-sm-10" readonly required value="{{ order.item.user.profile.account_num }}">
              </div>
            </div>
</form>
</div>
<hr>
{% endblock %}